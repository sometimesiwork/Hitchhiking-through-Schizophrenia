// Состояние игры
const gameState = {
    chapter: 0,
    clarity: 50,
    memory: 50,
    choices: []
};

// Данные игры
const chapters = [
    {
        title: "Преморбид",
        text: "В детском саду я сторонился других, я был замкнутым и боялся людей вокруг себя. В детстве меня воспитывали высокоморальным человеком, православным.\n\nВнутренние голоса говорили мне сброситься под поезд. Дома я бился головой об стену, чтобы избавиться от них.",
        choices: [
            { text: "Попытаться понять внутренние голоса", next: 1, clarity: -10, memory: 5 },
            { text: "Игнорировать их и сосредоточиться на учёбе", next: 2, clarity: 5, memory: 10 },
            { text: "Искать ответы в книгах и науке", next: 3, clarity: 5, memory: 15 }
        ]
    },
    {
        title: "Голоса",
        text: "Голоса становятся настойчивее. Они шепчут о вещах, которые ты не можешь понять. Мир вокруг кажется неопределённым. Ты чувствуешь себя отстранённым от других детей.\n\nВ школе ко мне относились с отвращением. Я учился в музыкальном классе с большим количеством девушек, им был важен внешний вид, а я был из небогатой семьи и плохо одет.",
        choices: [
            { text: "Продолжать учиться, игнорируя насмешки", next: 4, clarity: 10, memory: 15 },
            { text: "Попытаться найти друзей среди таких же отстранённых", next: 5, clarity: 5, memory: 10 },
            { text: "Углубиться в философию и размышления", next: 6, clarity: -5, memory: 20 }
        ]
    },
    {
        title: "Учёба",
        text: "Ты стараешься сосредоточиться на учёбе. В седьмом классе ты занял место на школьной олимпиаде по математике, делал успехи по литературе, математике и физике.\n\nНо даже так ты чувствовал себя где-то «в стороне». Одиноким среди других.",
        choices: [
            { text: "Продолжать добиваться успехов в учёбе", next: 7, clarity: 15, memory: 20 },
            { text: "Начать искать смысл за пределами обычного", next: 8, clarity: -10, memory: 15 },
            { text: "Попытаться стать более социальным", next: 9, clarity: 10, memory: 5 }
        ]
    },
    {
        title: "Поиск истины",
        text: "Ты углубляешься в книги, в философию, в науку. Читаешь энциклопедии запоем. Изучаешь физику и математику.\n\nТы постоянно мыслишь, и в конечном итоге, стал зависим от своего же мышления. Ты хотел мыслить всё больше, точнее, глубже.",
        choices: [
            { text: "Продолжать углубляться в размышления", next: 10, clarity: -15, memory: 25 },
            { text: "Попытаться найти баланс", next: 11, clarity: 10, memory: 15 },
            { text: "Остановиться и посмотреть на мир вокруг", next: 12, clarity: 15, memory: 10 }
        ]
    },
    {
        title: "Школа",
        text: "Ты продолжаешь учиться, несмотря на всё. В новой школе ты познакомился с очень важным для тебя человеком «B». Вы постоянно спорили, обсуждали естественные науки.\n\nТы не признавал проигрышей в спорах, оправдывался релятивизмом и уходил в софистику.",
        choices: [
            { text: "Продолжать споры и поиск истины", next: 13, clarity: -5, memory: 20 },
            { text: "Начать сомневаться в своих убеждениях", next: 14, clarity: 10, memory: 15 },
            { text: "Попытаться жить проще", next: 15, clarity: 15, memory: 5 }
        ]
    },
    {
        title: "Дружба",
        text: "Ты нашёл друга среди таких же отстранённых. Вы обсуждали философию, науку, мир вокруг.\n\nДруг B казался тебе гением. Он считал, что аксиом не существует. Хотел жить вечно. У него была очень развитая логика.",
        choices: [
            { text: "Принять его мировоззрение", next: 16, clarity: -10, memory: 20 },
            { text: "Найти свой путь", next: 17, clarity: 10, memory: 15 },
            { text: "Балансировать между разными взглядами", next: 18, clarity: 5, memory: 10 }
        ]
    },
    {
        title: "Философия",
        text: "Ты погружаешься всё глубже в философию. Вместо интуиции ты использовал чистую логику. Вместо эмоций и чувств — разум.\n\nТы стремился к реализму, хладнокровной рассудительности и рациональности. Рационализировал негативное.",
        choices: [
            { text: "Продолжать логический анализ всего", next: 19, clarity: -20, memory: 25 },
            { text: "Понять, что логика имеет пределы", next: 20, clarity: 15, memory: 20 },
            { text: "Вернуться к чувствам и эмоциям", next: 21, clarity: 10, memory: 15 }
        ]
    },
    {
        title: "Успех",
        text: "Твои успехи растут. В девятом классе ты занял второе место на олимпиаде по физике в НИЯУ МИФИ.\n\nНо несмотря на успехи, ты чувствуешь, что чего-то не хватает. Что мир вокруг тебя не такой, каким должен быть.",
        choices: [
            { text: "Продолжать стремиться к успеху", next: 22, clarity: 10, memory: 20 },
            { text: "Начать искать смысл за пределами достижений", next: 23, clarity: -10, memory: 25 },
            { text: "Попытаться наслаждаться жизнью", next: 24, clarity: 5, memory: 10 }
        ]
    },
    {
        title: "Смысл",
        text: "Ты начинаешь искать смысл. Задаёшься вопросами о природе реальности, о сознании, о бытии.\n\nТы деконструируешь самые глубокие принципы, даже принцип получения удовольствия и неполучения дискомфорта.",
        choices: [
            { text: "Продолжать деконструкцию", next: 25, clarity: -25, memory: 30 },
            { text: "Найти опору в чём-то простом", next: 26, clarity: 15, memory: 15 },
            { text: "Принять неопределённость", next: 27, clarity: 10, memory: 20 }
        ]
    },
    {
        title: "Социализация",
        text: "Ты пытаешься стать более социальным. В университете ты был общительным, открытым, пытался шокировать, изумлять своим поведением.\n\nУ тебя было много товарищей. Но всё это было продумано и спланировано. Не искренне.",
        choices: [
            { text: "Продолжать играть роль", next: 28, clarity: -5, memory: 10 },
            { text: "Попытаться быть искренним", next: 29, clarity: 10, memory: 15 },
            { text: "Отстраниться от социальных игр", next: 30, clarity: 15, memory: 5 }
        ]
    },
    {
        title: "Мыслительная зависимость",
        text: "Ты постоянно мыслишь. Ты зависим от мышления. Ты хочешь мыслить всё больше, точнее, глубже, законченнее.\n\nЭто приводит к дискомфорту от неудовлетворённости. Ты постоянно рефлексируешь, дублируешь мысли, детализируешь.",
        choices: [
            { text: "Попытаться остановить мышление", next: 31, clarity: 20, memory: 10 },
            { text: "Продолжать углубляться", next: 32, clarity: -30, memory: 35 },
            { text: "Найти другой способ существования", next: 33, clarity: 15, memory: 20 }
        ]
    },
    {
        title: "Баланс",
        text: "Ты пытаешься найти баланс между мышлением и жизнью. Между логикой и чувствами.\n\nЭто непросто. Ты всё ещё зависим от мыслительного процесса, но начинаешь видеть выход.",
        choices: [
            { text: "Усилить контроль над мышлением", next: 34, clarity: 20, memory: 15 },
            { text: "Позволить мышлению течь свободно", next: 35, clarity: -10, memory: 25 },
            { text: "Попытаться жить здесь и сейчас", next: 36, clarity: 25, memory: 10 }
        ]
    },
    {
        title: "Настоящее",
        text: "Ты останавливаешься. Смотришь на мир вокруг. На небо, на людей, на простые вещи.\n\nМир кажется другим. Более реальным. Более присутствующим.",
        choices: [
            { text: "Продолжать жить в настоящем", next: 37, clarity: 30, memory: 15 },
            { text: "Вернуться к размышлениям", next: 38, clarity: -10, memory: 20 },
            { text: "Найти новый путь", next: 39, clarity: 15, memory: 25 }
        ]
    },
    {
        title: "Релятивизм",
        text: "Постоянные споры привели к тому, что ты стал релятивистом. Всё относительно, всё неопределённо.\n\nТы потерял опору. Ты не видел в чём-либо объективного. Мир стал расплывчатым.",
        choices: [
            { text: "Принять неопределённость", next: 40, clarity: 5, memory: 20 },
            { text: "Найти новые опоры", next: 41, clarity: 15, memory: 15 },
            { text: "Продолжать искать истину", next: 42, clarity: -15, memory: 25 }
        ]
    },
    {
        title: "Сомнение",
        text: "Ты начинаешь сомневаться в своих убеждениях. Может быть, не всё так относительно?\n\nМожет быть, есть что-то, на что можно опереться?",
        choices: [
            { text: "Найти простые истины", next: 43, clarity: 20, memory: 15 },
            { text: "Остаться в сомнении", next: 44, clarity: 0, memory: 10 },
            { text: "Принять парадоксальность", next: 45, clarity: -5, memory: 20 }
        ]
    },
    {
        title: "Простота",
        text: "Ты пытаешься жить проще. Меньше думать, больше чувствовать.\n\nНо это непросто. Привычка мыслить сильна.",
        choices: [
            { text: "Продолжать упрощать жизнь", next: 46, clarity: 25, memory: 10 },
            { text: "Вернуться к сложности", next: 47, clarity: -10, memory: 20 },
            { text: "Найти золотую середину", next: 48, clarity: 15, memory: 15 }
        ]
    },
    {
        title: "Принятие",
        text: "Ты принимаешь мировоззрение друга. Всё относительно, аксиом нет, логика — всё.\n\nМир становится ещё более абстрактным, но и более понятным в своей абстрактности.",
        choices: [
            { text: "Углубиться в эту систему", next: 49, clarity: -15, memory: 30 },
            { text: "Найти границы системы", next: 50, clarity: 10, memory: 20 },
            { text: "Выйти за пределы", next: 51, clarity: 5, memory: 25 }
        ]
    },
    {
        title: "Свой путь",
        text: "Ты ищешь свой путь. Не просто принимать чужое, но находить своё.\n\nЭто требует времени. Требует размышлений. Но ты идёшь.",
        choices: [
            { text: "Продолжать поиск", next: 52, clarity: 10, memory: 20 },
            { text: "Создать свой синтез", next: 53, clarity: 15, memory: 25 },
            { text: "Остановиться и принять", next: 54, clarity: 20, memory: 15 }
        ]
    },
    {
        title: "Баланс взглядов",
        text: "Ты пытаешься балансировать между разными взглядами. Не принимать одну систему полностью.\n\nЭто сложно. Но это даёт свободу.",
        choices: [
            { text: "Найти общее в разных взглядах", next: 55, clarity: 15, memory: 20 },
            { text: "Принять противоречия", next: 56, clarity: 5, memory: 15 },
            { text: "Создать новую систему", next: 57, clarity: 10, memory: 25 }
        ]
    },
    {
        title: "Глубина",
        text: "Ты продолжаешь углубляться в логический анализ. Всё должно быть объяснено, всё должно быть понято.\n\nНо чем глубже ты идёшь, тем больше возникает вопросов.",
        choices: [
            { text: "Продолжать углубляться", next: 58, clarity: -30, memory: 35 },
            { text: "Признать пределы логики", next: 59, clarity: 20, memory: 25 },
            { text: "Найти другой способ понимания", next: 60, clarity: 15, memory: 20 }
        ]
    },
    {
        title: "Пределы",
        text: "Ты начинаешь понимать, что логика имеет пределы. Что не всё можно объяснить.\n\nЭто освобождает. Но и пугает.",
        choices: [
            { text: "Принять пределы", next: 61, clarity: 25, memory: 20 },
            { text: "Попытаться преодолеть их", next: 62, clarity: -20, memory: 30 },
            { text: "Найти красоту в неопределённости", next: 63, clarity: 20, memory: 15 }
        ]
    },
    {
        title: "Чувства",
        text: "Ты возвращаешься к чувствам и эмоциям. Они кажутся забытыми, но они есть.\n\nМир становится более живым, более настоящим.",
        choices: [
            { text: "Принять чувства", next: 64, clarity: 15, memory: 20 },
            { text: "Балансировать разум и чувства", next: 65, clarity: 20, memory: 15 },
            { text: "Бояться чувств", next: 66, clarity: -10, memory: 10 }
        ]
    },
    {
        title: "Успех продолжается",
        text: "Ты продолжаешь добиваться успехов. Но теперь они кажутся менее важными.\n\nЧто важнее — достижения или понимание?",
        choices: [
            { text: "Искать понимание", next: 67, clarity: 15, memory: 25 },
            { text: "Балансировать достижения и понимание", next: 68, clarity: 10, memory: 20 },
            { text: "Наслаждаться успехом", next: 69, clarity: 5, memory: 15 }
        ]
    },
    {
        title: "За пределами",
        text: "Ты ищешь смысл за пределами обычных достижений. В философии, в сознании, в бытии.\n\nМир раскрывается в новых измерениях.",
        choices: [
            { text: "Продолжать поиск", next: 70, clarity: -15, memory: 30 },
            { text: "Вернуться к простому", next: 71, clarity: 20, memory: 15 },
            { text: "Найти баланс", next: 72, clarity: 10, memory: 20 }
        ]
    },
    {
        title: "Жизнь",
        text: "Ты пытаешься наслаждаться жизнью. Простыми вещами. Моментом.\n\nЭто ново. Это странно. Но это приятно.",
        choices: [
            { text: "Продолжать наслаждаться", next: 73, clarity: 15, memory: 10 },
            { text: "Искать глубину в простом", next: 74, clarity: 10, memory: 20 },
            { text: "Вернуться к размышлениям", next: 75, clarity: -10, memory: 25 }
        ]
    },
    {
        title: "Деконструкция",
        text: "Ты продолжаешь деконструировать. Всё разбирается на части, всё анализируется.\n\nНо что остаётся после деконструкции?",
        choices: [
            { text: "Продолжать деконструировать", next: 76, clarity: -30, memory: 35 },
            { text: "Начать созидать", next: 77, clarity: 20, memory: 25 },
            { text: "Найти точку остановки", next: 78, clarity: 15, memory: 20 }
        ]
    },
    {
        title: "Опора",
        text: "Ты ищешь опору в чём-то простом. В настоящем моменте. В дыхании. В существовании.\n\nЭто помогает. Хотя бы немного.",
        choices: [
            { text: "Укрепить опору", next: 79, clarity: 25, memory: 15 },
            { text: "Найти другие опоры", next: 80, clarity: 10, memory: 20 },
            { text: "Принять отсутствие опоры", next: 81, clarity: 5, memory: 25 }
        ]
    },
    {
        title: "Неопределённость",
        text: "Ты принимаешь неопределённость. Мир неопределёнен, и это нормально.\n\nЭто освобождает. Но требует принятия.",
        choices: [
            { text: "Продолжать жить с неопределённостью", next: 82, clarity: 10, memory: 20 },
            { text: "Искать определённость", next: 83, clarity: -10, memory: 15 },
            { text: "Найти красоту в хаосе", next: 84, clarity: 15, memory: 25 }
        ]
    },
    {
        title: "Роль",
        text: "Ты продолжаешь играть роль. Быть тем, кем тебя хотят видеть.\n\nНо внутри что-то не так. Что-то не совпадает.",
        choices: [
            { text: "Продолжать играть", next: 85, clarity: -10, memory: 10 },
            { text: "Начать быть собой", next: 86, clarity: 20, memory: 20 },
            { text: "Найти компромисс", next: 87, clarity: 10, memory: 15 }
        ]
    },
    {
        title: "Искренность",
        text: "Ты пытаешься быть искренним. Не играть роль, а быть настоящим.\n\nЭто страшно. Но это освобождает.",
        choices: [
            { text: "Продолжать быть искренним", next: 88, clarity: 25, memory: 20 },
            { text: "Вернуться к роли", next: 89, clarity: -15, memory: 10 },
            { text: "Найти баланс", next: 90, clarity: 15, memory: 15 }
        ]
    },
    {
        title: "Отстранённость",
        text: "Ты отстраняешься от социальных игр. Смотришь на них со стороны.\n\nТы видишь их механику. Видишь их пустоту.",
        choices: [
            { text: "Продолжать наблюдать", next: 91, clarity: 20, memory: 15 },
            { text: "Вернуться в игру", next: 92, clarity: -10, memory: 10 },
            { text: "Найти свой способ общения", next: 93, clarity: 15, memory: 20 }
        ]
    },
    {
        title: "Остановка мышления",
        text: "Ты пытаешься остановить мышление. Перестать думать постоянно.\n\nЭто невероятно сложно. Мозг хочет думать.",
        choices: [
            { text: "Продолжать практиковать", next: 94, clarity: 30, memory: 10 },
            { text: "Принять мышление как часть себя", next: 95, clarity: 5, memory: 20 },
            { text: "Найти способ контролировать его", next: 96, clarity: 20, memory: 15 }
        ]
    },
    {
        title: "Глубина",
        text: "Ты продолжаешь углубляться. Всё глубже и глубже в мысли.\n\nМир становится всё более абстрактным.",
        choices: [
            { text: "Продолжать", next: 97, clarity: -35, memory: 40 },
            { text: "Остановиться", next: 98, clarity: 25, memory: 20 },
            { text: "Найти выход", next: 99, clarity: 15, memory: 25 }
        ]
    },
    {
        title: "Другой способ",
        text: "Ты ищешь другой способ существования. Не через постоянное мышление.\n\nМожет быть, через чувства? Через опыт? Через простое присутствие?",
        choices: [
            { text: "Исследовать чувства", next: 100, clarity: 20, memory: 25 },
            { text: "Просто быть", next: 101, clarity: 25, memory: 15 },
            { text: "Найти синтез", next: 102, clarity: 15, memory: 20 }
        ]
    },
    {
        title: "Контроль",
        text: "Ты пытаешься усилить контроль над мышлением. Не давать ему уходить в бесконечные циклы.\n\nЭто работает. Хотя бы частично.",
        choices: [
            { text: "Продолжать контролировать", next: 103, clarity: 25, memory: 15 },
            { text: "Ослабить контроль", next: 104, clarity: -10, memory: 25 },
            { text: "Найти баланс контроля", next: 105, clarity: 20, memory: 20 }
        ]
    },
    {
        title: "Свобода",
        text: "Ты позволяешь мышлению течь свободно. Не контролируешь его.\n\nОно уходит в странные места. Но это интересно.",
        choices: [
            { text: "Продолжать позволять", next: 106, clarity: -15, memory: 30 },
            { text: "Вернуть контроль", next: 107, clarity: 20, memory: 15 },
            { text: "Найти золотую середину", next: 108, clarity: 15, memory: 20 }
        ]
    },
    {
        title: "Здесь и сейчас",
        text: "Ты пытаешься жить здесь и сейчас. Не думать о прошлом, не планировать будущее.\n\nПросто быть. В моменте.",
        choices: [
            { text: "Продолжать практиковать", next: 109, clarity: 30, memory: 10 },
            { text: "Вернуться к размышлениям", next: 110, clarity: -10, memory: 25 },
            { text: "Найти баланс", next: 111, clarity: 20, memory: 15 }
        ]
    },
    {
        title: "Настоящее",
        text: "Ты продолжаешь жить в настоящем. Мир становится более живым, более реальным.\n\nПрошлое и будущее отдаляются. Остаётся только сейчас.",
        choices: [
            { text: "Углубиться в настоящее", next: 112, clarity: 35, memory: 10 },
            { text: "Вернуться к временам", next: 113, clarity: -15, memory: 30 },
            { text: "Принять все времена", next: 114, clarity: 20, memory: 20 }
        ]
    },
    {
        title: "Размышления",
        text: "Ты возвращаешься к размышлениям. Они зовут тебя обратно.\n\nНо теперь ты знаешь, что можно остановиться.",
        choices: [
            { text: "Углубиться в размышления", next: 115, clarity: -20, memory: 35 },
            { text: "Вернуться к настоящему", next: 116, clarity: 25, memory: 10 },
            { text: "Найти баланс", next: 117, clarity: 15, memory: 20 }
        ]
    },
    {
        title: "Новый путь",
        text: "Ты находишь новый путь. Не чистый разум, не чистые чувства.\n\nЧто-то другое. Что-то новое.",
        choices: [
            { text: "Исследовать новый путь", next: 118, clarity: 20, memory: 25 },
            { text: "Вернуться к старому", next: 119, clarity: -10, memory: 20 },
            { text: "Синтезировать", next: 120, clarity: 15, memory: 30 }
        ]
    },
    {
        title: "Принятие неопределённости",
        text: "Ты принимаешь неопределённость мира. Всё относительно, всё неопределённо.\n\nИ это нормально. Это освобождает.",
        choices: [
            { text: "Продолжать жить с этим", next: 121, clarity: 10, memory: 20 },
            { text: "Искать определённость", next: 122, clarity: -15, memory: 25 },
            { text: "Найти красоту в хаосе", next: 123, clarity: 20, memory: 30 }
        ]
    },
    {
        title: "Новые опоры",
        text: "Ты находишь новые опоры. Не в философии, не в логике.\n\nВ простых вещах. В существовании. В жизни.",
        choices: [
            { text: "Укрепить опоры", next: 124, clarity: 25, memory: 15 },
            { text: "Продолжать искать", next: 125, clarity: 5, memory: 25 },
            { text: "Принять отсутствие опор", next: 126, clarity: 10, memory: 20 }
        ]
    },
    {
        title: "Поиск истины",
        text: "Ты продолжаешь искать истину. Может быть, она где-то там, в глубине?\n\nНо поиск уводит тебя всё дальше от простоты.",
        choices: [
            { text: "Продолжать искать", next: 127, clarity: -20, memory: 35 },
            { text: "Остановиться", next: 128, clarity: 25, memory: 20 },
            { text: "Искать другим способом", next: 129, clarity: 10, memory: 25 }
        ]
    },
    {
        title: "Простые истины",
        text: "Ты находишь простые истины. Не в философии, не в сложных теориях.\n\nВ существовании. В моменте. В жизни.",
        choices: [
            { text: "Принять простоту", next: 130, clarity: 30, memory: 15 },
            { text: "Искать сложность", next: 131, clarity: -15, memory: 30 },
            { text: "Найти баланс", next: 132, clarity: 20, memory: 20 }
        ]
    },
    {
        title: "Сомнение",
        text: "Ты остаёшься в сомнении. Не знаешь, что правильно.\n\nНо может быть, сомнение — это и есть правильное состояние?",
        choices: [
            { text: "Принять сомнение", next: 133, clarity: 5, memory: 15 },
            { text: "Искать уверенность", next: 134, clarity: -10, memory: 20 },
            { text: "Найти покой в незнании", next: 135, clarity: 20, memory: 25 }
        ]
    },
    {
        title: "Парадоксальность",
        text: "Ты принимаешь парадоксальность мира. Всё противоречиво, всё парадоксально.\n\nИ это нормально. Это даже красиво.",
        choices: [
            { text: "Углубиться в парадоксы", next: 136, clarity: -10, memory: 30 },
            { text: "Найти гармонию в них", next: 137, clarity: 15, memory: 25 },
            { text: "Принять и жить", next: 138, clarity: 20, memory: 20 }
        ]
    },
    {
        title: "Упрощение",
        text: "Ты продолжаешь упрощать жизнь. Меньше думать, больше быть.\n\nЖизнь становится легче. Проще. Яснее.",
        choices: [
            { text: "Продолжать упрощать", next: 139, clarity: 30, memory: 10 },
            { text: "Вернуться к сложности", next: 140, clarity: -20, memory: 35 },
            { text: "Найти оптимальный уровень", next: 141, clarity: 20, memory: 20 }
        ]
    },
    {
        title: "Сложность",
        text: "Ты возвращаешься к сложности. К размышлениям, к философии.\n\nМир снова становится запутанным. Но это знакомо.",
        choices: [
            { text: "Углубиться", next: 142, clarity: -25, memory: 40 },
            { text: "Найти простоту в сложности", next: 143, clarity: 15, memory: 30 },
            { text: "Балансировать", next: 144, clarity: 10, memory: 25 }
        ]
    },
    {
        title: "Золотая середина",
        text: "Ты находишь золотую середину. Не слишком просто, не слишком сложно.\n\nБаланс. Гармония.",
        choices: [
            { text: "Поддерживать баланс", next: 145, clarity: 25, memory: 20 },
            { text: "Склоняться к простоте", next: 146, clarity: 20, memory: 15 },
            { text: "Склоняться к сложности", next: 147, clarity: -10, memory: 30 }
        ]
    },
    {
        title: "Система",
        text: "Ты углубляешься в систему. Всё связано, всё объяснимо.\n\nНо система становится всё более абстрактной. Всё более отдалённой от реальности.",
        choices: [
            { text: "Продолжать углубляться", next: 148, clarity: -20, memory: 35 },
            { text: "Найти границы", next: 149, clarity: 15, memory: 25 },
            { text: "Выйти из системы", next: 150, clarity: 20, memory: 30 }
        ]
    },
    {
        title: "Границы",
        text: "Ты находишь границы системы. Видишь, где она заканчивается.\n\nЭто освобождает. Даёт перспективу.",
        choices: [
            { text: "Принять границы", next: 151, clarity: 25, memory: 20 },
            { text: "Попытаться расширить", next: 152, clarity: -15, memory: 30 },
            { text: "Найти выход", next: 153, clarity: 20, memory: 25 }
        ]
    },
    {
        title: "За пределами",
        text: "Ты выходишь за пределы системы. Видишь её со стороны.\n\nСистема становится просто одной из возможностей. Не единственной истиной.",
        choices: [
            { text: "Исследовать другие возможности", next: 154, clarity: 20, memory: 30 },
            { text: "Вернуться в систему", next: 155, clarity: -10, memory: 20 },
            { text: "Найти синтез", next: 156, clarity: 15, memory: 25 }
        ]
    },
    {
        title: "Поиск продолжается",
        text: "Ты продолжаешь искать свой путь. Не сдаёшься.\n\nПуть длинный. Но ты идёшь.",
        choices: [
            { text: "Продолжать идти", next: 157, clarity: 10, memory: 20 },
            { text: "Остановиться и оглянуться", next: 158, clarity: 20, memory: 25 },
            { text: "Выбрать направление", next: 159, clarity: 15, memory: 20 }
        ]
    },
    {
        title: "Синтез",
        text: "Ты создаёшь свой синтез. Соединяешь разные взгляды в нечто новое.\n\nЭто твоё. Это уникально.",
        choices: [
            { text: "Развивать синтез", next: 160, clarity: 20, memory: 30 },
            { text: "Искать новое", next: 161, clarity: 5, memory: 25 },
            { text: "Принять синтез", next: 162, clarity: 25, memory: 20 }
        ]
    },
    {
        title: "Принятие",
        text: "Ты останавливаешься и принимаешь. Принимаешь себя, свой путь, свой поиск.\n\nИ это достаточно. Это хорошо.",
        choices: [
            { text: "Жить с принятием", next: 163, clarity: 30, memory: 15 },
            { text: "Продолжать искать", next: 164, clarity: -10, memory: 25 },
            { text: "Углубить принятие", next: 165, clarity: 25, memory: 20 }
        ]
    },
    {
        title: "Общее",
        text: "Ты ищешь общее в разных взглядах. Что объединяет, а не разделяет.\n\nНаходишь связи. Находишь единство в многообразии.",
        choices: [
            { text: "Развивать понимание единства", next: 166, clarity: 20, memory: 25 },
            { text: "Искать различия", next: 167, clarity: -10, memory: 20 },
            { text: "Балансировать", next: 168, clarity: 15, memory: 22 }
        ]
    },
    {
        title: "Противоречия",
        text: "Ты принимаешь противоречия. Мир противоречив, и это нормально.\n\nМожно жить с противоречиями. Можно находить в них гармонию.",
        choices: [
            { text: "Найти гармонию в противоречиях", next: 169, clarity: 15, memory: 25 },
            { text: "Разрешить противоречия", next: 170, clarity: -15, memory: 30 },
            { text: "Принять их", next: 171, clarity: 20, memory: 20 }
        ]
    },
    {
        title: "Новая система",
        text: "Ты создаёшь новую систему. Не просто принимаешь чужую, а создаёшь свою.\n\nЭто творчество. Это свобода.",
        choices: [
            { text: "Развивать систему", next: 172, clarity: 15, memory: 30 },
            { text: "Оставить гибкой", next: 173, clarity: 20, memory: 25 },
            { text: "Разрушить и создать заново", next: 174, clarity: 5, memory: 35 }
        ]
    },
    {
        title: "Пределы логики",
        text: "Ты признаёшь пределы логики. Не всё можно объяснить логически.\n\nИ это освобождает. Даёт пространство для другого понимания.",
        choices: [
            { text: "Исследовать за пределами логики", next: 175, clarity: 20, memory: 30 },
            { text: "Расширить логику", next: 176, clarity: -10, memory: 25 },
            { text: "Принять пределы", next: 177, clarity: 25, memory: 20 }
        ]
    },
    {
        title: "Преодоление",
        text: "Ты пытаешься преодолеть пределы логики. Расширить её границы.\n\nЭто амбициозно. Но возможно, тщетно.",
        choices: [
            { text: "Продолжать пытаться", next: 178, clarity: -25, memory: 35 },
            { text: "Принять пределы", next: 179, clarity: 30, memory: 20 },
            { text: "Найти другой способ", next: 180, clarity: 15, memory: 28 }
        ]
    },
    {
        title: "Красота",
        text: "Ты находишь красоту в неопределённости. В том, что нельзя объяснить.\n\nЭто поэтично. Это глубоко.",
        choices: [
            { text: "Углубиться в красоту", next: 181, clarity: 25, memory: 30 },
            { text: "Искать объяснения", next: 182, clarity: -15, memory: 25 },
            { text: "Просто наслаждаться", next: 183, clarity: 20, memory: 15 }
        ]
    },
    {
        title: "Чувства приняты",
        text: "Ты принимаешь чувства. Не боишься их больше.\n\nОни делают мир более живым, более настоящим.",
        choices: [
            { text: "Открыться чувствам", next: 184, clarity: 20, memory: 25 },
            { text: "Балансировать с разумом", next: 185, clarity: 25, memory: 20 },
            { text: "Бояться их силы", next: 186, clarity: -15, memory: 15 }
        ]
    },
    {
        title: "Баланс разума и чувств",
        text: "Ты находишь баланс между разумом и чувствами. Не один, не другое.\n\nИх синтез. Их гармония.",
        choices: [
            { text: "Развивать баланс", next: 187, clarity: 30, memory: 25 },
            { text: "Склоняться к разуму", next: 188, clarity: -10, memory: 30 },
            { text: "Склоняться к чувствам", next: 189, clarity: 5, memory: 20 }
        ]
    },
    {
        title: "Страх",
        text: "Ты боишься чувств. Их силы, их неконтролируемости.\n\nНо страх тоже чувство. Ты в ловушке.",
        choices: [
            { text: "Преодолеть страх", next: 190, clarity: 20, memory: 25 },
            { text: "Принять страх", next: 191, clarity: 15, memory: 20 },
            { text: "Бежать от чувств", next: 192, clarity: -20, memory: 10 }
        ]
    },
    {
        title: "Понимание",
        text: "Ты ищешь понимание. Не просто знания, а настоящее понимание.\n\nЭто требует времени. Требует опыта.",
        choices: [
            { text: "Продолжать искать", next: 193, clarity: 15, memory: 30 },
            { text: "Принять непонимание", next: 194, clarity: 20, memory: 25 },
            { text: "Найти баланс", next: 195, clarity: 18, memory: 22 }
        ]
    },
    {
        title: "Достижения и понимание",
        text: "Ты балансируешь между достижениями и пониманием.\n\nОба важны. Оба имеют ценность.",
        choices: [
            { text: "Сфокусироваться на понимании", next: 196, clarity: 20, memory: 30 },
            { text: "Сфокусироваться на достижениях", next: 197, clarity: 5, memory: 20 },
            { text: "Поддерживать баланс", next: 198, clarity: 15, memory: 25 }
        ]
    },
    {
        title: "Успех",
        text: "Ты наслаждаешься успехом. Достижениями. Признанием.\n\nЭто приятно. Но достаточно ли?",
        choices: [
            { text: "Продолжать стремиться", next: 199, clarity: 5, memory: 20 },
            { text: "Искать глубину", next: 200, clarity: 15, memory: 30 },
            { text: "Найти удовлетворение", next: 201, clarity: 20, memory: 15 }
        ]
    },
    {
        title: "Продолжение поиска",
        text: "Ты продолжаешь искать смысл за пределами обычного.\n\nМир раскрывается. Но становится всё более сложным.",
        choices: [
            { text: "Продолжать углубляться", next: 202, clarity: -20, memory: 35 },
            { text: "Вернуться к простому", next: 203, clarity: 25, memory: 15 },
            { text: "Найти баланс", next: 204, clarity: 10, memory: 25 }
        ]
    },
    {
        title: "Возврат",
        text: "Ты возвращаешься к простому. К жизни. К моменту.\n\nМир становится яснее. Проще. Реальнее.",
        choices: [
            { text: "Углубиться в простоту", next: 205, clarity: 30, memory: 10 },
            { text: "Вернуться к сложности", next: 206, clarity: -15, memory: 30 },
            { text: "Найти золотую середину", next: 207, clarity: 20, memory: 20 }
        ]
    },
    {
        title: "Баланс",
        text: "Ты находишь баланс между простым и сложным.\n\nНе слишком просто, не слишком сложно. В самый раз.",
        choices: [
            { text: "Поддерживать баланс", next: 208, clarity: 25, memory: 20 },
            { text: "Склоняться к простоте", next: 209, clarity: 20, memory: 15 },
            { text: "Склоняться к сложности", next: 210, clarity: -10, memory: 30 }
        ]
    },
    {
        title: "Наслаждение",
        text: "Ты продолжаешь наслаждаться жизнью. Простыми вещами.\n\nЭто хорошо. Это достаточно.",
        choices: [
            { text: "Продолжать наслаждаться", next: 211, clarity: 15, memory: 10 },
            { text: "Искать глубину в простом", next: 212, clarity: 10, memory: 25 },
            { text: "Вернуться к размышлениям", next: 213, clarity: -15, memory: 30 }
        ]
    },
    {
        title: "Глубина в простом",
        text: "Ты ищешь глубину в простом. Не поверхностность, а настоящее понимание.\n\nПростое становится глубоким. Глубокое становится простым.",
        choices: [
            { text: "Углубиться дальше", next: 214, clarity: 15, memory: 30 },
            { text: "Наслаждаться простотой", next: 215, clarity: 20, memory: 15 },
            { text: "Найти синтез", next: 216, clarity: 18, memory: 22 }
        ]
    },
    {
        title: "Размышления возвращаются",
        text: "Ты возвращаешься к размышлениям. Они зовут тебя.\n\nНо теперь ты знаешь, что можно остановиться.",
        choices: [
            { text: "Углубиться", next: 217, clarity: -25, memory: 35 },
            { text: "Контролировать", next: 218, clarity: 20, memory: 20 },
            { text: "Найти выход", next: 219, clarity: 15, memory: 25 }
        ]
    },
    {
        title: "Созидание",
        text: "Ты начинаешь созидать. Не только разрушать, но и создавать.\n\nЭто новый опыт. Это творчество.",
        choices: [
            { text: "Продолжать созидать", next: 220, clarity: 25, memory: 30 },
            { text: "Балансировать с деконструкцией", next: 221, clarity: 15, memory: 25 },
            { text: "Вернуться к разрушению", next: 222, clarity: -20, memory: 30 }
        ]
    },
    {
        title: "Остановка",
        text: "Ты находишь точку остановки. Где-то между деконструкцией и созиданием.\n\nБаланс. Гармония.",
        choices: [
            { text: "Поддерживать баланс", next: 223, clarity: 20, memory: 20 },
            { text: "Склоняться к созиданию", next: 224, clarity: 25, memory: 30 },
            { text: "Склоняться к деконструкции", next: 225, clarity: -10, memory: 25 }
        ]
    },
    {
        title: "Опора укреплена",
        text: "Ты укрепляешь опору в настоящем моменте. В существовании.\n\nЭто помогает. Даёт стабильность.",
        choices: [
            { text: "Углубить опору", next: 226, clarity: 30, memory: 15 },
            { text: "Искать другие опоры", next: 227, clarity: 5, memory: 25 },
            { text: "Принять множественность опор", next: 228, clarity: 20, memory: 20 }
        ]
    },
    {
        title: "Другие опоры",
        text: "Ты ищешь другие опоры. Не только настоящее, но и другие точки отсчёта.\n\nМножественность. Гибкость.",
        choices: [
            { text: "Развивать множественность", next: 229, clarity: 15, memory: 30 },
            { text: "Вернуться к одной опоре", next: 230, clarity: 20, memory: 15 },
            { text: "Найти синтез", next: 231, clarity: 18, memory: 22 }
        ]
    },
    {
        title: "Отсутствие опоры",
        text: "Ты принимаешь отсутствие опоры. Не нужна опора, чтобы существовать.\n\nСвобода. Лёгкость.",
        choices: [
            { text: "Жить без опоры", next: 232, clarity: 10, memory: 25 },
            { text: "Создать свою опору", next: 233, clarity: 20, memory: 20 },
            { text: "Принять парадокс", next: 234, clarity: 15, memory: 30 }
        ]
    },
    {
        title: "Неопределённость принята",
        text: "Ты принимаешь неопределённость. Живёшь с ней.\n\nЭто становится естественным. Нормальным.",
        choices: [
            { text: "Углубиться в принятие", next: 235, clarity: 15, memory: 25 },
            { text: "Искать определённость", next: 236, clarity: -15, memory: 30 },
            { text: "Найти баланс", next: 237, clarity: 20, memory: 22 }
        ]
    },
    {
        title: "Определённость",
        text: "Ты ищешь определённость в неопределённом мире.\n\nЭто сложно. Может быть, невозможно?",
        choices: [
            { text: "Продолжать искать", next: 238, clarity: -20, memory: 35 },
            { text: "Принять неопределённость", next: 239, clarity: 25, memory: 20 },
            { text: "Найти относительную определённость", next: 240, clarity: 15, memory: 25 }
        ]
    },
    {
        title: "Красота хаоса",
        text: "Ты находишь красоту в хаосе. В неопределённости. В сложности.\n\nЭто поэтично. Это глубоко.",
        choices: [
            { text: "Углубиться в красоту", next: 241, clarity: 25, memory: 30 },
            { text: "Искать порядок", next: 242, clarity: -10, memory: 25 },
            { text: "Найти гармонию", next: 243, clarity: 20, memory: 28 }
        ]
    },
    {
        title: "Наблюдение",
        text: "Ты продолжаешь наблюдать за социальными играми со стороны.\n\nВидишь их механику. Их пустоту. Их красоту.",
        choices: [
            { text: "Продолжать наблюдать", next: 244, clarity: 25, memory: 20 },
            { text: "Вернуться в игру", next: 245, clarity: -15, memory: 10 },
            { text: "Создать свою игру", next: 246, clarity: 20, memory: 25 }
        ]
    },
    {
        title: "Возврат в игру",
        text: "Ты возвращаешься в социальные игры. Но теперь знаешь, что это игра.\n\nЭто меняет всё. И ничего.",
        choices: [
            { text: "Играть осознанно", next: 247, clarity: 15, memory: 15 },
            { text: "Выбраться из игры", next: 248, clarity: 25, memory: 20 },
            { text: "Создать свою игру", next: 249, clarity: 20, memory: 25 }
        ]
    },
    {
        title: "Свой способ",
        text: "Ты находишь свой способ общения. Не игра, не отстранённость.\n\nЧто-то другое. Что-то настоящее.",
        choices: [
            { text: "Развивать свой способ", next: 250, clarity: 25, memory: 25 },
            { text: "Экспериментировать", next: 251, clarity: 10, memory: 30 },
            { text: "Принять его", next: 252, clarity: 30, memory: 20 }
        ]
    },
    {
        title: "Практика",
        text: "Ты продолжаешь практиковать остановку мышления.\n\nПостепенно это становится легче. Привычнее.",
        choices: [
            { text: "Углубить практику", next: 253, clarity: 35, memory: 10 },
            { text: "Найти баланс", next: 254, clarity: 25, memory: 15 },
            { text: "Вернуться к мышлению", next: 255, clarity: -20, memory: 35 }
        ]
    },
    {
        title: "Принятие мышления",
        text: "Ты принимаешь мышление как часть себя. Не борешься с ним.\n\nЭто освобождает. Даёт мир.",
        choices: [
            { text: "Жить с принятием", next: 256, clarity: 20, memory: 25 },
            { text: "Продолжать контролировать", next: 257, clarity: 25, memory: 15 },
            { text: "Найти гармонию", next: 258, clarity: 30, memory: 20 }
        ]
    },
    {
        title: "Контроль",
        text: "Ты находишь способ контролировать мышление. Не полностью, но достаточно.\n\nЭто даёт свободу. Даёт выбор.",
        choices: [
            { text: "Развивать контроль", next: 259, clarity: 30, memory: 18 },
            { text: "Ослабить контроль", next: 260, clarity: -10, memory: 30 },
            { text: "Найти баланс", next: 261, clarity: 25, memory: 20 }
        ]
    },
    {
        title: "Исследование чувств",
        text: "Ты исследуешь чувства. Их природу. Их силу.\n\nОни открывают новые измерения мира.",
        choices: [
            { text: "Продолжать исследовать", next: 262, clarity: 20, memory: 30 },
            { text: "Принять чувства", next: 263, clarity: 25, memory: 25 },
            { text: "Вернуться к разуму", next: 264, clarity: -10, memory: 20 }
        ]
    },
    {
        title: "Просто быть",
        text: "Ты просто существуешь. Не думаешь, не анализируешь.\n\nПросто быть. Это достаточно.",
        choices: [
            { text: "Углубиться в бытие", next: 265, clarity: 35, memory: 10 },
            { text: "Вернуться к мышлению", next: 266, clarity: -15, memory: 30 },
            { text: "Найти баланс", next: 267, clarity: 25, memory: 20 }
        ]
    },
    {
        title: "Синтез",
        text: "Ты находишь синтез. Не только мышление, не только чувства.\n\nИх единство. Их гармония.",
        choices: [
            { text: "Развивать синтез", next: 268, clarity: 30, memory: 25 },
            { text: "Углубиться в одно", next: 269, clarity: -10, memory: 30 },
            { text: "Принять синтез", next: 270, clarity: 25, memory: 20 }
        ]
    },
    {
        title: "Эпилог",
        text: "Путешествие продолжается. Мир остаётся неопределённым. Сложным. Красивым.\n\nТы нашёл свой путь. Не идеальный, но твой.\n\nИ этого достаточно.\n\n==========\n\n«Я ни о чём не мыслю, я мыслю процессами, у меня нет речи, похож ли я на человека, если я использую лишь интуицию? Где грань, осознавая которую ты захочешь жить?»",
        choices: []
    }
];

// Инициализация игры
function initGame() {
    updateGameScreen();
}

// Обновление экрана игры
function updateGameScreen() {
    const currentChapter = chapters[gameState.chapter];
    
    // Обновляем заголовок
    document.getElementById('chapter-title').textContent = currentChapter.title;
    
    // Обновляем текст
    const storyText = document.getElementById('story-text');
    storyText.textContent = currentChapter.text;
    
    // Удаляем старые классы состояний
    document.body.classList.remove('state-confused', 'state-memory', 'state-philosophy');
    
    // Добавляем класс состояния в зависимости от ясности
    if (gameState.clarity < 30) {
        document.body.classList.add('state-confused');
    } else if (gameState.memory > 70) {
        document.body.classList.add('state-memory');
    } else if (gameState.clarity > 70 && gameState.memory > 60) {
        document.body.classList.add('state-philosophy');
    }
    
    // Обновляем выборы
    const choicesContainer = document.getElementById('choices-container');
    choicesContainer.innerHTML = '';
    
    if (currentChapter.choices.length === 0) {
        // Конец игры
        const endButton = document.createElement('button');
        endButton.className = 'choice-button';
        endButton.textContent = 'Начать заново';
        endButton.onclick = () => {
            gameState.chapter = 0;
            gameState.clarity = 50;
            gameState.memory = 50;
            gameState.choices = [];
            updateGameScreen();
        };
        choicesContainer.appendChild(endButton);
    } else {
        currentChapter.choices.forEach((choice, index) => {
            const button = document.createElement('button');
            button.className = 'choice-button';
            button.textContent = choice.text;
            button.onclick = () => makeChoice(choice);
            choicesContainer.appendChild(button);
        });
    }
    
    // Обновляем статистику
    updateStats();
}

// Выбор игрока
function makeChoice(choice) {
    gameState.choices.push({
        chapter: gameState.chapter,
        choice: choice.text
    });
    
    // Обновляем статистику
    gameState.clarity = Math.max(0, Math.min(100, gameState.clarity + choice.clarity));
    gameState.memory = Math.max(0, Math.min(100, gameState.memory + choice.memory));
    
    // Переходим к следующей главе
    if (choice.next < chapters.length) {
        gameState.chapter = choice.next;
    } else {
        // Если следующей главы нет, переходим к эпилогу
        gameState.chapter = chapters.length - 1;
    }
    
    updateGameScreen();
}

// Обновление статистики
function updateStats() {
    document.getElementById('clarity-value').textContent = gameState.clarity;
    document.getElementById('memory-value').textContent = gameState.memory;
    
    document.getElementById('clarity-bar').style.width = gameState.clarity + '%';
    document.getElementById('memory-bar').style.width = gameState.memory + '%';
}

// Запуск игры
window.onload = initGame;

